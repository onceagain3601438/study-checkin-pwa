<!--å­¦ä¹ æ‰“å¡æ—¥å†é¦–é¡µ-->
<view class="calendar-container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="header">
    <view class="header-content">
      <text class="app-title">å­¦ä¹ æ‰“å¡æ—¥å†</text>
      <view class="total-points">
        <text class="points-icon">ğŸ†</text>
        <text class="points-value">{{totalPoints}}</text>
        <text class="points-unit">æ€»ç§¯åˆ†</text>
      </view>
    </view>
    
    <!-- åŠ±å¿—è¯è¯­ -->
    <view class="motivational-section">
      <text class="motivational-text">ğŸ“… æ¯ä¸€å¤©éƒ½æ˜¯æ–°çš„å¼€å§‹</text>
      <text class="motivational-sub">åšæŒå­¦ä¹ ï¼Œè®©æ—¶é—´è§è¯æˆé•¿çš„åŠ›é‡ âœ¨</text>
    </view>
  </view>

  <!-- æ—¥å†æ§åˆ¶åŒºåŸŸ -->
  <view class="calendar-header">
    <view class="month-navigation">
      <view class="nav-btn" bindtap="onPrevMonth">
        <text class="nav-icon">â€¹</text>
      </view>
      <view class="month-info">
        <text class="current-month">{{currentYear}}å¹´{{currentMonth}}æœˆ</text>
      </view>
      <view class="nav-btn" bindtap="onNextMonth">
        <text class="nav-icon">â€º</text>
      </view>
    </view>
    
    <!-- ä»Šæ—¥å¿«æ·å…¥å£ -->
    <view class="quick-today" bindtap="onGoToToday">
      <text class="today-icon">ğŸ“</text>
      <text class="today-text">ä»Šæ—¥</text>
    </view>
  </view>

  <!-- æ—¥å†ä¸»ä½“ -->
  <view class="calendar-main">
    <!-- æ˜ŸæœŸæ ‡é¢˜ -->
    <view class="week-header">
      <view class="week-day">æ—¥</view>
      <view class="week-day">ä¸€</view>
      <view class="week-day">äºŒ</view>
      <view class="week-day">ä¸‰</view>
      <view class="week-day">å››</view>
      <view class="week-day">äº”</view>
      <view class="week-day">å…­</view>
    </view>

    <!-- æ—¥å†ç½‘æ ¼ -->
    <view class="calendar-grid">
      <view 
        class="calendar-day {{item.isCurrentMonth ? 'current-month' : 'other-month'}} {{item.isToday ? 'today' : ''}} {{item.hasRecord ? 'has-record' : ''}}"
        wx:for="{{calendarDays}}"
        wx:key="dateString"
        bindtap="onDateClick"
        data-date="{{item.dateString}}">
        
        <!-- æ—¥æœŸæ•°å­— -->
        <text class="day-number">{{item.day}}</text>
        
        <!-- å­¦ä¹ è®°å½•æŒ‡ç¤ºå™¨ -->
        <view class="record-indicators" wx:if="{{item.hasRecord}}">
          <view class="indicator-dot completed" wx:if="{{item.recordInfo.hasCompleted}}"></view>
          <view class="indicator-dot partial" wx:if="{{item.recordInfo.hasPartial && !item.recordInfo.hasCompleted}}"></view>
        </view>
        
        <!-- ç§¯åˆ†æ˜¾ç¤º -->
        <text class="day-points" wx:if="{{item.recordInfo.earnedPoints > 0}}">{{item.recordInfo.earnedPoints}}</text>
      </view>
    </view>
  </view>

  <!-- æœˆåº¦ç»Ÿè®¡ -->
  <view class="month-stats">
    <view class="stats-header">
      <text class="stats-title">{{currentMonth}}æœˆå­¦ä¹ ç»Ÿè®¡</text>
    </view>
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-number">{{monthStats.studyDays}}</text>
        <text class="stat-label">å­¦ä¹ å¤©æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{monthStats.completedTasks}}</text>
        <text class="stat-label">å®Œæˆä»»åŠ¡</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{monthStats.totalPoints}}</text>
        <text class="stat-label">æœˆåº¦ç§¯åˆ†</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{monthStats.avgCompletion}}%</text>
        <text class="stat-label">å¹³å‡å®Œæˆç‡</text>
      </view>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œåŒºåŸŸ -->
  <view class="quick-actions">
    <button class="quick-btn today-btn" bindtap="onGoToTodayStudy">
      <text class="quick-icon">ğŸ“š</text>
      <text class="quick-text">ä»Šæ—¥å­¦ä¹ </text>
    </button>
    <button class="quick-btn template-btn" bindtap="onGoToTemplate">
      <text class="quick-icon">ğŸ“</text>
      <text class="quick-text">å­¦ä¹ æ¨¡æ¿</text>
    </button>
    <button class="quick-btn stats-btn" bindtap="onShowDetailStats">
      <text class="quick-icon">ğŸ“Š</text>
      <text class="quick-text">å­¦ä¹ ç»Ÿè®¡</text>
    </button>
  </view>
</view>